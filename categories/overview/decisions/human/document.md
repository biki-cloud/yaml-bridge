# プロジェクト決定ログ

**タイプ:** 📋 決定ログ（ADR） | **ステータス:** 🔄 WIP | **バージョン:** 1.0.0
**作成者:** 山田太郎
**この doc_type の役割:** プロジェクトで行った重要な決定と理由を記録する。

## 決定一覧

決まったことの記録。open_items の検討事項が決まったらここに結論を追記する。

| ID | 概要 | 結論 | 決定日 | 決定者 | 紐づく検討事項 |
|----|------|------|--------|--------|----------------|
| ADR-001 | 認証プロトコルは OAuth 2.0 / OIDC 準拠とする | RFC 6749 / OpenID Connect Core に準拠した認証基盤... | 2024-01-15 | 山田太郎 | O-001 |
| ADR-002 | リフレッシュトークンはローテーション方式とする | リフレッシュトークン使用のたびに新しいトークンを発行し、使用済みトークンは無効化... | 2024-01-20 | 山田太郎 | - |
| ADR-003 | 二要素認証は TOTP（アプリ型）を第一候補とする | 二要素認証は TOTP（Google Authenticator 等のアプリ）を... | 2024-01-22 | 山田太郎 | - |

### ADR-001: 認証プロトコルは OAuth 2.0 / OIDC 準拠とする

**結論:** RFC 6749 / OpenID Connect Core に準拠した認証基盤を採用する。
既存のセッション方式は移行期間中のみ併存し、新規実装はすべてトークンベースとする。


**背景・理由:**
現行システムは独自のセッション管理で、他システム連携やモバイル対応に不利。
業界標準に合わせることでライブラリ・ツールの利用と監査対応を容易にする。


**決定:** 2024-01-15 / 山田太郎
**紐づく検討事項 ID:** O-001

### ADR-002: リフレッシュトークンはローテーション方式とする

**結論:** リフレッシュトークン使用のたびに新しいトークンを発行し、使用済みトークンは無効化する（ローテーション）。
漏洩時の影響範囲を最小化するため。


**背景・理由:**
OWASP の推奨に沿い、固定のリフレッシュトークン長期利用を避ける。


**決定:** 2024-01-20 / 山田太郎

### ADR-003: 二要素認証は TOTP（アプリ型）を第一候補とする

**結論:** 二要素認証は TOTP（Google Authenticator 等のアプリ）を標準でサポートする。
SMS はコスト・セキュリティの観点から当面は対象外とする。


**背景・理由:**
ユーザー利便性と実装コストのバランス。TOTP はライブラリが豊富で導入が容易。


**決定:** 2024-01-22 / 山田太郎

## 関連資料（エビデンス）

- [プロジェクト概要](../../project_summary/human/document.md)
- [検討事項・不明点](../../open_items/human/document.md)
- [要件整理](../../../design/requirements/human/document.md)

---

[プロジェクト概要に戻る](../../project_summary/human/document.md)