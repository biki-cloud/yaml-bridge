# 障害・振り返り

**タイプ:** 📋 障害・振り返り | **ステータス:** 🔄 WIP | **バージョン:** 1.0.0
**作成者:** 山田太郎
**この doc_type の役割:** 障害の振り返りと再発防止策を記録する。

## 障害・インシデント一覧

| ID | タイトル | 発生日時 | 解消日時 | 深刻度 |
|----|----------|----------|----------|--------|
| INC-001 | ステージングで Redis 接続タイムアウトが多発 | 2024-01-19T14:00:00+09:00 | 2024-01-19T14:45:00+09:00 | 🟡 中 |

### INC-001: ステージングで Redis 接続タイムアウトが多発

**概要:** ステージングデプロイ後、認証APIの応答が遅延・タイムアウトする事象が発生。
ログイン・リフレッシュが失敗し、ステージングでの検証ができない状態になった。


**期間:** 2024-01-19T14:00:00+09:00 ～ 2024-01-19T14:45:00+09:00

**原因:**
Redis の接続タイムアウトが 5 秒に設定されており、ステージングの Redis が
コールドスタートやネットワーク遅延で 5 秒を超えることがあった。
また、接続失敗時のリトライ回数が 1 回のみで、一時的な障害に弱かった。


**対応内容:**
1. タイムアウトを 30 秒に変更し、リトライを 3 回に増やした。
2. ステージングの Redis を再起動し、接続を確認した。
3. 実装結果ドキュメントに「Redis接続タイムアウトが短すぎた」として記録済み。


**再発防止策:**
1. 環境ごとの推奨タイムアウト・リトライを環境・インフラ doc に明記する。
2. ステージングデプロイ後にヘルスチェック＋認証 1 回を CI に組み込み、早期検知する。


**参照ランブック:** RB-003（Redis 接続障害時の初動）

本番では ElastiCache のため同様のコールドスタートは起きにくいが、閾値は本番に合わせて再検討する。

## 関連資料（エビデンス）

- [プロジェクト概要](../../../overview/project_summary/human/document.md)
- [ランブック](../../runbook/human/document.md)
- [実装結果（セッション管理）](../../implementation_result/human/document.md)

---

[プロジェクト概要に戻る](../../../overview/project_summary/human/document.md)